<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="FrameReceiver_fichiers/filelist.xml">
<link rel=Edit-Time-Data href="FrameReceiver_fichiers/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>FrameReceiver</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>udeslph</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>udeslph</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1778</o:TotalTime>
  <o:LastPrinted>2016-04-15T20:06:00Z</o:LastPrinted>
  <o:Created>2016-04-15T20:11:00Z</o:Created>
  <o:LastSaved>2016-04-15T20:11:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2007</o:Words>
  <o:Characters>11042</o:Characters>
  <o:Company>Ville de Montréal</o:Company>
  <o:Lines>92</o:Lines>
  <o:Paragraphs>26</o:Paragraphs>
  <o:CharactersWithSpaces>13023</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-520092929 1073806591 9 0 415 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;}
h2
	{mso-style-link:"Titre 2 Car";
	mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
pre
	{mso-style-name:"Préformaté HTML\,code";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	background:white;
	border:none;
	mso-border-alt:solid #EEEEEE .5pt;
	padding:0cm;
	mso-padding-alt:13.0pt 13.0pt 13.0pt 13.0pt;
	font-size:9.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
span.Titre2Car
	{mso-style-name:"Titre 2 Car";
	mso-style-locked:yes;
	mso-style-link:"Titre 2";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:Arial;
	mso-ascii-font-family:Arial;
	mso-hansi-font-family:Arial;
	mso-bidi-font-family:Arial;
	mso-ansi-language:FR-CA;
	mso-fareast-language:FR-CA;
	mso-bidi-language:AR-SA;
	font-weight:bold;
	font-style:italic;}
span.pl-c1
	{mso-style-name:pl-c1;}
span.pl-smi
	{mso-style-name:pl-smi;}
span.pl-k
	{mso-style-name:pl-k;}
span.pl-en
	{mso-style-name:pl-en;}
span.pl-s
	{mso-style-name:pl-s;}
span.pl-pds
	{mso-style-name:pl-pds;}
span.pl-c
	{mso-style-name:pl-c;}
span.pl-ent
	{mso-style-name:pl-ent;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1116215758;
	mso-list-type:hybrid;
	mso-list-template-ids:1283864002 202113025 202113027 202113029 202113025 202113027 202113029 202113025 202113027 202113029;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Courier New";}
@list l1
	{mso-list-id:1865287494;
	mso-list-type:hybrid;
	mso-list-template-ids:1350366598 202113025 202113027 202113029 202113025 202113027 202113029 202113025 202113027 202113029;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l2
	{mso-list-id:2054308355;
	mso-list-type:hybrid;
	mso-list-template-ids:736134102 891855398 202113049 202113051 202113039 202113049 202113051 202113039 202113049 202113051;}
@list l2:level1
	{mso-level-text:%1-;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Tableau Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=FR-CA link=blue vlink=purple style='tab-interval:35.4pt'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-size:16.0pt;font-family:Arial'>Frame <span
class=SpellE>Receiver</span><o:p></o:p></span></b></p>

<p class=MsoNormal align=center style='text-align:center'><span class=GramE><span
style='font-family:Arial'>récepteur</span></span><span style='font-family:Arial'>
de trames <span class=SpellE>gps</span><o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-family:"Arial Black"'><o:p>&nbsp;</o:p></span></p>

<h1><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600"
 o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f"
 stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_s1030" type="#_x0000_t75" alt="Logo" style='position:absolute;
 margin-left:36pt;margin-top:364.9pt;width:350.75pt;height:93.5pt;z-index:-1'>
 <v:imagedata src="FrameReceiver_fichiers/image001.png" o:href="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/AngularJS_logo.svg/langfr-695px-AngularJS_logo.svg.png"/>
</v:shape><![endif]--><![if !vml]><span style='mso-ignore:vglayout;position:
absolute;z-index:-1;margin-left:48px;margin-top:486px;width:468px;height:125px'><img
width=468 height=125 src="FrameReceiver_fichiers/image002.gif" alt=Logo v:shapes="_x0000_s1030"></span><![endif]><!--[if gte vml 1]><v:shape
 id="_x0000_s1028" type="#_x0000_t75" alt="" style='position:absolute;
 margin-left:1in;margin-top:274.9pt;width:262.35pt;height:50.1pt;z-index:-3'>
 <v:imagedata src="FrameReceiver_fichiers/image003.png" o:href="https://www.rabbitmq.com/img/rabbitmq_logo_strap.png"/>
</v:shape><![endif]--><![if !vml]><span style='mso-ignore:vglayout;position:
absolute;z-index:-3;margin-left:96px;margin-top:366px;width:350px;height:67px'><img
width=350 height=67 src="FrameReceiver_fichiers/image004.gif" v:shapes="_x0000_s1028"></span><![endif]><!--[if gte vml 1]><v:shape
 id="_x0000_s1027" type="#_x0000_t75" alt="" style='position:absolute;
 margin-left:99pt;margin-top:157.9pt;width:211.6pt;height:76.4pt;z-index:-4'
 wrapcoords="1149 635 230 4024 -77 7412 77 10800 996 14188 1072 16306 5438 17576 11872 17576 9268 18635 8885 19059 8885 21176 9115 21388 9728 21388 20604 21388 20834 20965 20911 18847 17617 17576 12638 17576 13251 14188 21294 13976 21600 13341 20834 10800 20681 6565 15779 5718 2374 4024 1532 635 1149 635">
 <v:imagedata src="FrameReceiver_fichiers/image005.png" o:href="https://www.mongodb.org/assets/global/mongodb-logo-web-tagline-99280fe76cc002a93d023901c1a05df8b621f1c893084a580dee83de9be96630.png"/>
</v:shape><![endif]--><![if !vml]><span style='mso-ignore:vglayout;position:
absolute;z-index:-4;margin-left:132px;margin-top:210px;width:282px;height:102px'><img
width=282 height=102 src="FrameReceiver_fichiers/image006.gif" v:shapes="_x0000_s1027"></span><![endif]><!--[if gte vml 1]><v:shape
 id="_x0000_s1029" type="#_x0000_t75" alt="" style='position:absolute;
 margin-left:99pt;margin-top:4.9pt;width:261pt;height:130.85pt;z-index:-2'>
 <v:imagedata src="FrameReceiver_fichiers/image007.png" o:href="http://cdn.ttgtmedia.com/rms/LeMagIT/images/nodejs-logo.png"/>
</v:shape><![endif]--><![if !vml]><span style='mso-ignore:vglayout;position:
absolute;z-index:-2;margin-left:132px;margin-top:7px;width:348px;height:174px'><img
width=348 height=174 src="FrameReceiver_fichiers/image008.gif" v:shapes="_x0000_s1029"></span><![endif]><br
clear=all style='page-break-before:always'>
<span class=SpellE>FrameReceiver</span></h1>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce programme de réception de trame fonctionne avec <span
class=SpellE>Node.js</span>. C’est un prototype visant à expérimenté avec le <span
class=SpellE>stack</span> MEAN (mongo, express, <span class=SpellE>angular</span>,
<span class=SpellE>node</span>). Dans son état présent, le programme Frame <span
class=SpellE>Receiver</span> peut&nbsp;recevoir et filtrer des trames <span
class=SpellE>UDPs</span> de façon asynchrone afin de les formatées en JSON pour
qu’elles puissent être envoyées à un service d’analyse spatiale écrit en <span
class=SpellE>Node.js</span> utilisant la librairie <span class=SpellE>Turf.js</span>
(cette partie n’est pas implémentée dans le programme présent). La persistance
est couverte par une base de données <span class=SpellE>Mongodb</span>, qui
enregistre les trames une fois filtrées en objets JSON. Les erreurs non fatales
sont enregistrées dans la même base de données.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>L’utilisation de <span class=SpellE>Nodejs</span> convient
très bien pour un service du genre. Il met les trames reçues dans une file et
les «&nbsp;<span class=SpellE>process</span>&nbsp;» une par une grâce à la
logique interne du langage. Dans le cas ou le nombre de trames entrantes <span
class=SpellE>devientrait</span> excessif, la transformation du programme afin
de supporter plusieurs «&nbsp;<span class=SpellE>workers</span>&nbsp;»
s’exécutant sur plusieurs «&nbsp;threads&nbsp;» différents est très facile.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Principales fonctions&nbsp;:<o:p></o:p></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='text-align:justify;mso-list:l0 level1 lfo2;
     tab-stops:list 36.0pt'><span style='font-size:10.0pt;font-family:Arial'>Recevoir
     des trames GPS par UDP<o:p></o:p></span></li>
 <li class=MsoNormal style='text-align:justify;mso-list:l0 level1 lfo2;
     tab-stops:list 36.0pt'><span style='font-size:10.0pt;font-family:Arial'>Filtrer
     les trames GPS, écrire dans la bd l’adresse des trames refusées<o:p></o:p></span></li>
 <li class=MsoNormal style='text-align:justify;mso-list:l0 level1 lfo2;
     tab-stops:list 36.0pt'><span style='font-size:10.0pt;font-family:Arial'>Analyser
     les trames en objets JSON<o:p></o:p></span></li>
 <li class=MsoNormal style='text-align:justify;mso-list:l0 level1 lfo2;
     tab-stops:list 36.0pt'><span style='font-size:10.0pt;font-family:Arial'>Envoyer
     les trames analysées à un service d’analyse spatiale<o:p></o:p></span></li>
 <ul style='margin-top:0cm' type=circle>
  <li class=MsoNormal style='text-align:justify;mso-list:l0 level2 lfo2;
      tab-stops:list 72.0pt'><span style='font-size:10.0pt;font-family:Arial'>envoyer
      le retour (si n’est pas ERROR) dans le «&nbsp;<span class=SpellE>Work</span>/Exchange&nbsp;»<o:p></o:p></span></li>
 </ul>
</ul>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Fonctions secondaires&nbsp;:<o:p></o:p></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='text-align:justify;mso-list:l1 level1 lfo3;
     tab-stops:list 36.0pt'><span style='font-size:10.0pt;font-family:Arial'>Fournir
     un service de log accessible à partir de la base de données.<o:p></o:p></span></li>
</ul>

<h2><!--[if gte vml 1]><v:shape id="_x0000_s1026" type="#_x0000_t75" alt=""
 style='position:absolute;margin-left:0;margin-top:19.55pt;width:556.5pt;
 height:262.15pt;z-index:1;mso-position-horizontal:left'>
 <v:imagedata src="FrameReceiver_fichiers/image009.png" o:href="https://raw.githubusercontent.com/Deasel011/ConsolidatedFR/Screenshot1/Screen%20Shot%202016-04-14%20at%204.46.13%20PM.png"/>
 <w:wrap type="square"/>
</v:shape><![endif]--><![if !vml]><img width=742 height=350
src="FrameReceiver_fichiers/image010.gif" align=left hspace=12 v:shapes="_x0000_s1026"><![endif]><span
style='font-size:10.0pt'><o:p></o:p></span></h2>

<h2><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></h2>

<h2><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></h2>

<b><i><span style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:
"Times New Roman";mso-ansi-language:FR-CA;mso-fareast-language:FR-CA;
mso-bidi-language:AR-SA'><br clear=all style='page-break-before:always'>
</span></i></b>

<h2><span class=SpellE>Main.js</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>La partie principale du programme. Fait les appels aux
différents modules expliqués ici-bas. <o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:solid #EEEEEE 1.0pt;mso-border-alt:
solid #EEEEEE .5pt;padding:13.0pt 13.0pt 13.0pt 13.0pt;background:white'><pre><span
class=SpellE><span class=GramE>udpserver.<span style='color:#3366FF'>on</span></span></span><span
class=GramE>(</span>'message', <span class=SpellE><span style='color:red'>function</span></span>(data, <span
class=SpellE>remote</span>){</pre><pre><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>frametype.<span style='color:#3366FF'>filterUdp</span></span></span><span
class=GramE>(</span><span class=SpellE>data,<span style='color:red'>function</span></span>(frame){</pre><pre><span style='mso-spacerun:yes'>            </span><span
class=SpellE><span class=GramE>framedb.<span style='color:#3366FF'>insert</span></span></span><span
class=GramE>(</span>frame, <span class=SpellE><span style='color:red'>function</span></span>(<span
class=SpellE>err,result</span>){</pre><pre><span style='mso-spacerun:yes'>                </span>(<span
class=SpellE>err</span>===<span class=SpellE>null</span>)<span class=GramE>?console.log</span>(&quot;+ <span
class=SpellE>wrote</span> to <span class=SpellE>db</span>&quot;):<span
class=SpellE>log.<span style='color:#3366FF'>local</span></span>(<span
class=SpellE>err</span>);</pre><pre><span style='mso-spacerun:yes'>            </span>});</pre><pre><span style='mso-spacerun:yes'>            </span><span
style='color:#666699'>/*<span class=SpellE><span class=GramE>spatialanaliser.analyse</span></span><span
class=GramE>(</span>frame, <span class=SpellE>function</span>(<span
class=SpellE>err,result</span></span><span style='color:yellow'>){<span style='mso-spacerun:yes'>       </span><o:p></o:p></span></pre><pre><span style='mso-spacerun:yes'>              </span><span
style='color:#666699'><span style='mso-spacerun:yes'>  </span><span
class=GramE>if(</span><span class=SpellE>err</span>) { log(<span class=SpellE>err</span>) }<o:p></o:p></span></pre><pre><span
style='color:#666699'><span style='mso-spacerun:yes'>                </span><span
class=SpellE><span class=GramE>else</span></span> if (<span class=SpellE>err</span> === <span
class=SpellE>null</span>) {<o:p></o:p></span></pre><pre><span style='color:
#666699'><span style='mso-spacerun:yes'>            </span>*/<o:p></o:p></span></pre><pre><span style='mso-spacerun:yes'>                </span><span
class=SpellE><span class=GramE>workexchange.<span style='color:#3366FF'>sendToExchange</span></span></span><span
class=GramE>(</span>frame);</pre><pre><o:p>&nbsp;</o:p></pre><pre><span
style='color:#666699'><span style='mso-spacerun:yes'>             </span>/*<span style='mso-spacerun:yes'>   </span>}<span style='mso-spacerun:yes'>    </span><o:p></o:p></span></pre><pre><span
style='color:#666699'><span style='mso-spacerun:yes'>             </span>}*/<o:p></o:p></span></pre><pre><span style='mso-spacerun:yes'>        </span>} <span
class=SpellE><span class=GramE>else</span></span> if (frame === <span
class=SpellE>null</span>) {</pre><pre><span style='mso-spacerun:yes'>            </span><span
class=SpellE><span class=GramE>deniedframelog.<span style='color:#3366FF'>insert</span></span></span><span
class=GramE>(</span>{<span class=SpellE>ip</span>: <span class=SpellE>remote.address</span>,</pre><pre><span
style='mso-tab-count:4'>                                   </span>date: (new Date).<span
class=SpellE><span class=GramE>getTime</span></span><span class=GramE>(</span>),</pre><pre><span
style='mso-tab-count:4'>                                   </span><span
class=SpellE><span class=GramE>msg</span></span>: &quot;Frame <span
class=SpellE>was</span> not of <span class=SpellE>specified</span> type&quot;},</pre><pre><span style='mso-spacerun:yes'>                </span><span
class=SpellE><span class=GramE><span style='color:red'>function</span></span></span><span
class=GramE>(</span><span class=SpellE>err</span>, <span class=SpellE>result</span>){</pre><pre><span style='mso-spacerun:yes'>                    </span>(<span
class=SpellE><span class=GramE>err</span></span>===<span class=SpellE>null</span>)</pre><pre><span
style='mso-tab-count:3'>                          </span>? <span class=GramE>console.<span
style='color:#3366FF'>log</span>(</span>&quot;<span class=SpellE>Denied</span> frame <span
class=SpellE>inserted</span>&quot;)</pre><pre><span style='mso-tab-count:3'>                          </span>: <span
class=SpellE><span class=GramE>log.<span style='color:#3366FF'>local</span></span></span><span
class=GramE>(</span>&quot;<span class=SpellE>Denied</span> frame not <span
class=SpellE>inserted</span>&quot;);</pre><pre><span style='mso-spacerun:yes'>                </span>}</pre><pre><span style='mso-spacerun:yes'>            </span>)</pre><pre><span style='mso-spacerun:yes'>        </span>}</pre><pre><span style='mso-spacerun:yes'>    </span>})</pre><pre>});</pre></div>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Toute la logique du code se trouve dans cette partie.
D’abord, le socket <span class=GramE>UDP(</span><span class=SpellE>udpserver</span>)
reçoit une trame GPS, puis cette trame est directement filtrée (<span
class=SpellE>frametype</span>). Ensuite, la trame doit être envoyée au service
d’analyse spatiale (<span class=SpellE>spatialAnalyser</span>). Lorsqu’un objet
<span class=SpellE>GeoJSON</span> en revient, on l’insert dans la base de
données (<span class=SpellE>dbwriter</span>) et on l’envoie au Queue Manager (<span
class=SpellE>workexchange</span>).<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt'><!--[if gte vml 1]><v:shape
 id="_x0000_i1025" type="#_x0000_t75" alt="" style='width:451.5pt;height:180pt'>
 <v:imagedata src="FrameReceiver_fichiers/image011.png" o:href="https://raw.githubusercontent.com/Deasel011/ConsolidatedFR/Screenshot1/Screen%20Shot%202016-04-11%20at%205.05.48%20PM.png"/>
</v:shape><![endif]--><![if !vml]><img width=602 height=240
src="FrameReceiver_fichiers/image012.gif" v:shapes="_x0000_i1025"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce diagramme représente le chemin que parcourt une trame GPS
dans les différents modules du récepteur de trames<span class=GramE>..</span><o:p></o:p></span></p>

<h2><span class=SpellE>Config.js</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><span style='mso-tab-count:1'>            </span>Le fichier
de configuration conserve les différentes adresses IP des services que l’application
utilise. Le fichier de configuration est actuellement configuré pour être roulé
à partir d’un Docker ou les différents services sont linker par leurs noms de
container plutôt qu’adresse IP.<o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-size:10.0pt;font-family:"Courier New";color:black'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid #EEEEEE 1.0pt;mso-border-alt:
solid #EEEEEE .5pt;padding:13.0pt 13.0pt 13.0pt 13.0pt;background:white'><pre><span
class=SpellE><span style='color:#339966'>module</span>.exports</span> = {</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=GramE>host</span>'</span>: <span
style='color:#3366FF'>'127.0.0.1'</span>,</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=GramE>port</span>'</span>: <span
style='color:#3366FF'>'8000'</span>,</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=SpellE><span class=GramE>dbtype</span></span>'</span>: <span
style='color:#3366FF'>'mongo'</span>,</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=SpellE><span class=GramE>dburl</span></span>'</span>: <span
style='color:#3366FF'>'mongodb://mongo:27017/frame'</span>,</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=SpellE><span class=GramE>portudp</span></span>'</span>: <span
style='color:#3366FF'>'3001'</span>,</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=SpellE><span class=GramE>exchangeurl</span></span>'</span>: <span
style='color:#3366FF'>'amqp://rabbitmq'</span>,</pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=GramE>exchange</span>'</span>: <span
style='color:#3366FF'>'frame'</span>,<span style='mso-spacerun:yes'>                    </span></pre><pre><span style='mso-spacerun:yes'>    </span><span
style='color:#3366FF'>'<span class=SpellE><span class=GramE>errPath</span></span>'</span>: <span
style='color:#3366FF'>'/log/'</span></pre><pre>}</pre></div>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h1>Modules</h1>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Dans tous les modules, le fichier principal se nomme <span
class=SpellE>index.js</span> de sorte qu’on peut accéder au module seulement
avec le nom de son dossier. Ex&nbsp;: var <span class=SpellE>udp</span> = <span
class=SpellE><span class=GramE>require</span></span><span class=GramE>(</span>‘./<span
class=SpellE>udpreceiver</span>’).<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>Udpreceiver</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce module ouvre un socket <span class=SpellE>udp</span> sur
le port spécifié dans le fichier de configuration grâce à sa méthode&nbsp;: <span
class=SpellE><span class=GramE>connect</span></span><span class=GramE>(</span>).<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=SpellE><span class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;
color:#0086B3'>module</span></span><span style='font-size:7.5pt;font-family:
Consolas;color:#333333'>.<span class=pl-smi>exports</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>=</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span></span><span class=SpellE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>connect</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=SpellE><span class=GramE><span class=pl-k><span style='font-size:7.5pt;
font-family:Consolas;color:#A71D5D'>function</span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>var</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> server </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>=</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi>dgram</span>.<span class=pl-en><span
style='color:#795DA3'>createSocket</span></span></span></span><span
class=GramE>(</span></span><span class=pl-pds><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>'</span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>udp4</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span><span class=SpellE><span class=GramE><span
class=pl-smi>server</span>.<span class=pl-en><span style='color:#795DA3'>bind</span></span></span></span><span
class=GramE>(</span><span class=SpellE><span class=pl-smi>configs</span>.<span
class=pl-smi>portudp</span></span>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>return</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> server;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>};<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>Frametype</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce module fait l’analyse des trames en string et retourne un
objet JSON. La seule type de trame présentement retournée en JSON est celle de
type 83. On peut utiliser celle-ci comme canevas de base pour appliquer le
«&nbsp;<span class=SpellE>parser</span>&nbsp;» aux autres types de trames
possibles lorsqu’il y en aura a traité.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Index&nbsp;: <o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=SpellE><span class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;
color:#0086B3'>exports</span></span><span style='font-size:7.5pt;font-family:
Consolas;color:#333333'>.</span><span class=pl-en><span style='font-size:7.5pt;
font-family:Consolas;color:#795DA3'>filterUdp</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>=</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=SpellE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'>function</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'> (<span class=pl-smi>frame</span>, <span
class=pl-smi>callback</span>) {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span></span><span class=SpellE><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>switch</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> (<span class=GramE>frame[</span></span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>0</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>]) {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>case</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>131</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
class=pl-c><span style='font-size:7.5pt;font-family:Consolas;color:#969896'>//83</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>           </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>type83</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.</span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>filterUdp</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>(<span class=SpellE>frame,callback</span>));<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>break</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>case</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>281</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
class=pl-c><span style='font-size:7.5pt;font-family:Consolas;color:#969896'>//119
TODO implémenté avec la logique</span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>type119</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.</span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>filterUdp</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>(<span class=SpellE>frame,callback</span>));<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>break</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>case</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>288</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
class=pl-c><span style='font-size:7.5pt;font-family:Consolas;color:#969896'>//120
TODO implémenté avec la logique</span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>      </span><span
style='mso-spacerun:yes'>      </span></span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>type120</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.</span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>filterUdp</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>(<span class=SpellE>frame,callback</span>));<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>break</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>default</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span><span class=SpellE><span
class=GramE><span class=pl-smi>log</span>.<span class=pl-en><span
style='color:#795DA3'>error</span></span></span></span><span class=GramE>(</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>Frame
Type <span class=SpellE>unknown</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>)<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;
color:#0086B3'>null</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>break</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>};<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Exemple type 83&nbsp;:<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=SpellE><span class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;
color:#0086B3'>exports</span></span><span style='font-size:7.5pt;font-family:
Consolas;color:#333333'>.</span><span class=pl-en><span style='font-size:7.5pt;
font-family:Consolas;color:#795DA3'>filterUdp</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>=</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=SpellE><span class=GramE><span class=pl-k><span style='font-size:7.5pt;
font-family:Consolas;color:#A71D5D'>function</span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'>frame</span></span><span style='font-size:7.5pt;font-family:
Consolas;color:#333333'>,<span class=pl-smi>callback</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span></span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>parseFrame</span></span></span></span><span class=GramE><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>frame,</span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>function</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=GramE><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>if</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>arguments[</span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>0</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>].<span
class=SpellE><span class=pl-smi>OptionsByte</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>===</span></span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>131</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-c><span style='font-size:7.5pt;font-family:Consolas;color:#969896'>//TODO
: valider les champs a vérifier</span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=pl-c><span
style='font-size:7.5pt;font-family:Consolas;color:#969896'>//&amp;&amp;arguments[0].Speed!==0</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=pl-c><span
style='font-size:7.5pt;font-family:Consolas;color:#969896'>//&amp;&amp;arguments[0].<span
class=SpellE>Heading</span>!==0</span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span><span class=GramE>){</span></span><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(arguments[</span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>0</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>]);}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span></span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'>else</span></span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>            </span></span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>false</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>})<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>};<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=SpellE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'>function</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>parseFrame</span></span></span></span><span class=GramE><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'>request</span></span><span style='font-size:7.5pt;font-family:
Consolas;color:#333333'>,<span class=pl-smi>callback</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span></span><span class=GramE><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>callback</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'>frameHeader</span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>.</span><span class=pl-c1><span
style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>parse</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(<span class=SpellE>request</span>));<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>}</span><span style='font-size:10.0pt;
font-family:Arial'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>var</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE>frameHeader</span>
</span><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'>=</span></span><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'> </span><span class=pl-k><span style='font-size:7.5pt;
font-family:Consolas;color:#A71D5D'>new</span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>Parser</span></span></span></span><span class=GramE><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>()</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>.</span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>uint8</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>OptionsByte</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>)<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>.</span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>uint8</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>MobileIDLength</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>)<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>.</span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'>array</span></span></span></span><span class=GramE><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>MobileID</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>,{type</span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>uint8</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>,<span class=SpellE>length</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>:</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>MobileIDLength</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>})<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>.</span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>uint8</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>MobileIDLen</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>)<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>.</span><span class=GramE><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'>bit8</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>MobileIDType</span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>)<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><span style='mso-tab-count:1'>            </span>…<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>Database</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce module gère la connexion à la base de données. Nous
utilisons le module <span class=SpellE>Mongoose</span> car il est bâtit «&nbsp;<span
class=SpellE>event</span>-<span class=SpellE>driven</span>&nbsp;» et son
utilisation est plus naturelle que le driver <span class=SpellE>MongoDB</span> natif.
Nous y sauvegardons toute les trames qui ont passé ainsi que l’adresse des
trames qui ont étés refusées, pour voir d’où elles proviennent.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=SpellE><span class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;
color:#0086B3'>module</span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>.<span class=pl-smi><span style='box-sizing: border-box'>exports</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span></span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>connect</span></span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>return</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>mongoose</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>connect</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE><span class=pl-smi><span
style='box-sizing: border-box'>configs</span></span>.<span class=pl-smi><span
style='box-sizing: border-box'>dburl</span></span></span>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>},<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span></span><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>frame83</span></span></span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>return</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>mongoose</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>model</span></span></span></span></span><span
class=GramE>(</span></span><span class=pl-pds><span style='box-sizing: border-box'><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>'</span></span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>frame83<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>, type83schema).<span
class=SpellE><span class=pl-smi><span style='box-sizing: border-box'>db</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>collection</span></span></span></span>(</span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'><span style='box-sizing: border-box'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>frame<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>},<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span></span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>deniedframe</span></span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>return</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>mongoose</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>model</span></span></span></span></span><span
class=GramE>(</span></span><span class=pl-pds><span style='box-sizing: border-box'><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>'</span></span></span><span class=SpellE><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>deniedframe<span
style='box-sizing: border-box'></span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>, <span
class=SpellE>deniedlog</span>).<span class=SpellE><span class=pl-smi><span
style='box-sizing: border-box'>db</span></span>.<span class=pl-en><span
style='color:#795DA3'><span style='box-sizing: border-box'>collection</span></span></span></span>(</span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'><span style='box-sizing: border-box'>&quot;</span></span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>deniedlog<span style='box-sizing: border-box'></span></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>},<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span></span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>errlogger</span></span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>return</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>mongoose</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>model</span></span></span></span></span><span
class=GramE>(</span></span><span class=pl-pds><span style='box-sizing: border-box'><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>'</span></span></span><span class=SpellE><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>errorlog<span
style='box-sizing: border-box'></span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>, <span
class=SpellE>errorlog</span>).<span class=SpellE><span class=pl-smi><span
style='box-sizing: border-box'>db</span></span>.<span class=pl-en><span
style='color:#795DA3'><span style='box-sizing: border-box'>collection</span></span></span></span>(</span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'><span style='box-sizing: border-box'>&quot;</span></span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>errorlog<span style='box-sizing: border-box'></span></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>},<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span></span><span
class=SpellE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>disconnect</span></span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>return</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>mongoose</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>disconnect</span></span></span></span></span><span
class=GramE>(</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>};<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>var</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> type83schema </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>new</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>Schema</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>({</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span><span class=GramE>frame</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-c1><span
style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>Object</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>});<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>var</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE>deniedlog</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>new</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>Schema</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>({</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span><span class=SpellE><span class=GramE>ip</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-c1><span
style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>String</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>,<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span><span class=GramE>date</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-c1><span
style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>Date</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'>,<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span><span class=SpellE><span class=GramE>msg</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-c1><span
style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>String</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>});<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>var</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE>errorlog</span>
</span><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>=</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>new</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>Schema</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>({</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span><span class=SpellE><span class=GramE>error</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-c1><span
style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>Object</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>});<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>Toanalysis</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce module n’est pas encore complété. C’est le module qui
envoie les trames «&nbsp;<span class=SpellE>parser</span>&nbsp;» à un service
d’analyse spatiale. Le programme s’attend <span class=GramE>a</span> recevoir
un objet JSON (GEOJSON) en callback qu’il pourra par la suite envoyer au Queue
Manager.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>Torabbit</span></h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Ce module prend en paramètre un objet JSON qu’il va
transformer en string afin de le mettre dans le Queue Manager. Il l’envoie présentement
à une instance de <span class=SpellE>RabbitMQ</span> roulant dans un docker
container.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
class=SpellE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'>function</span></span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-en><span style='font-size:7.5pt;font-family:Consolas;
color:#795DA3'><span style='box-sizing: border-box'>connect</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>) {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span><span
class=SpellE><span class=GramE><span class=pl-smi><span style='box-sizing: border-box'>amqp</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>connect</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE><span class=pl-smi><span
style='box-sizing: border-box'>configs</span></span>.<span class=pl-smi><span
style='box-sizing: border-box'>exchangeurl</span></span>,<span class=pl-k><span
style='color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span>(<span
class=SpellE><span class=pl-smi><span style='box-sizing: border-box'>err</span></span>,<span
class=pl-smi><span style='box-sizing: border-box'>conn</span></span></span>){<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>if</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>err</span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<span
class=SpellE><span class=pl-smi><span style='box-sizing: border-box'>log</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>error</span></span></span></span>(<span
class=SpellE>err</span>);}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span></span><span
class=SpellE><span class=GramE><span class=pl-k><span style='font-size:7.5pt;
font-family:Consolas;color:#A71D5D'><span style='box-sizing: border-box'>else</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>           </span><span
style='mso-spacerun:yes'> </span><span class=SpellE><span class=GramE><span
class=pl-smi><span style='box-sizing: border-box'>conn</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>createChannel</span></span></span></span></span><span
class=GramE>(</span></span><span class=SpellE><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>function</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> (<span
class=SpellE><span class=pl-smi><span style='box-sizing: border-box'>err</span></span></span>,
<span class=SpellE><span class=pl-smi><span style='box-sizing: border-box'>ch</span></span></span>)
{<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>               </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>if</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> (<span
class=SpellE>err</span>) {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>                </span><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'> </span><span
class=SpellE><span class=GramE><span class=pl-smi><span style='box-sizing: border-box'>log</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>error</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE>err</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>                   </span><span
style='mso-spacerun:yes'> </span><span class=SpellE><span class=GramE><span
class=pl-smi><span style='box-sizing: border-box'>log</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>local</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE>err</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>                </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>               </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>console</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.</span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>log</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'>(</span></span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>++ <span
class=SpellE>channel</span> up<span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>               </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>var</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> ex </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=pl-smi><span style='box-sizing: border-box'>configs</span></span>.<span
class=pl-smi><span style='box-sizing: border-box'>exchange</span></span></span>;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>               </span><span
style='mso-spacerun:yes'> </span><span class=SpellE><span class=GramE><span
class=pl-smi><span style='box-sizing: border-box'>ch</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>assertExchange</span></span></span></span></span><span
class=GramE>(</span>ex, </span><span class=pl-pds><span style='box-sizing: border-box'><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>'</span></span></span><span class=SpellE><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>fanout<span
style='box-sizing: border-box'></span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>, {durable</span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>true</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>});<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>               </span><span
style='mso-spacerun:yes'> </span><span class=SpellE><span class=GramE><span
class=pl-smi><span style='box-sizing: border-box'>emitter</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>addListener</span></span></span></span></span><span
class=GramE>(</span></span><span class=pl-pds><span style='box-sizing: border-box'><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>'</span></span></span><span class=SpellE><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>toExchange<span
style='box-sizing: border-box'></span></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>, </span><span
class=SpellE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> (<span
class=pl-smi><span style='box-sizing: border-box'>data</span></span>) {<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>                   </span><span
style='mso-spacerun:yes'> </span><span class=SpellE><span class=GramE><span
class=pl-smi><span style='box-sizing: border-box'>ch</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>publish</span></span></span></span></span><span
class=GramE>(</span>ex, </span><span class=pl-pds><span style='box-sizing: border-box'><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>'</span><span style='box-sizing: border-box'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>, </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>new</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>Buffer</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span><span
class=SpellE><span class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;
color:#0086B3'><span style='box-sizing: border-box'>JSON</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.</span><span
class=pl-en><span style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>stringify</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>(data)));<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>                   </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>console</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.</span><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'><span
style='box-sizing: border-box'>log</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'>(</span></span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>+
sent to exchange<span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>);<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>                </span>})<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>     </span><span
style='mso-spacerun:yes'>       </span>});<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>        </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><span
style='mso-spacerun:yes'>    </span>});<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;line-height:11.4pt'><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>Logger</span></h2>

<p class=MsoNormal style='line-height:11.4pt'><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'>var</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> log </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>bunyan</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>createLogger</span></span></span></span></span><span
class=GramE>({</span><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>name</span></span></span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>&quot;</span></span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>FrameError<span style='box-sizing: border-box'></span></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>,<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>streams</span></span></span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'>[<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>       
</span>{<span class=SpellE><span class=GramE>level</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>'</span></span></span><span
class=SpellE><span class=pl-s><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'>error<span style='box-sizing: border-box'></span></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>,<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>       
</span><span class=SpellE><span class=GramE>path</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE>errPath</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>+</span></span></span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>'</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>error.log<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>},<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>       
</span>{<span class=SpellE><span class=GramE>level</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>'</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>fatal<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>,<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>       
</span><span class=SpellE><span class=GramE>path</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE>errPath</span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>+</span></span></span><span class=pl-pds><span
style='box-sizing: border-box'><span style='font-size:7.5pt;font-family:Consolas;
color:#183691'><span style='box-sizing: border-box'>'</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>fatal.log<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>'</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>}<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   
</span>],<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>serializers</span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=pl-smi><span style='box-sizing: border-box'>bunyan</span></span>.<span
class=pl-smi><span style='box-sizing: border-box'>stdSerializers</span></span></span><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>});<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span class=SpellE><span
class=pl-c1><span style='font-size:7.5pt;font-family:Consolas;color:#0086B3'>module</span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>.<span class=pl-smi><span
style='box-sizing: border-box'>exports</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'> </span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> {<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=SpellE><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>init</span></span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'><span style='box-sizing: border-box'>database</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>) {<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>       
</span><span class=SpellE>errorlog</span> </span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>=</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> <span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>database</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>errlogger</span></span></span></span></span><span
class=GramE>(</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   
</span>},<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=SpellE><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>error</span></span></span></span><span
class=pl-k><span style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'><span style='box-sizing: border-box'>err</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>      
</span><span style='mso-spacerun:yes'> </span><span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>errorlog</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>insert</span></span></span></span></span><span
class=GramE>(</span>{<span class=SpellE>error<span class=pl-k><span
style='color:#A71D5D'><span style='box-sizing: border-box'>:</span></span></span><span
class=pl-c1><span style='color:#0086B3'><span style='box-sizing: border-box'>JSON</span></span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>stringify</span></span></span></span>(<span
class=SpellE>err</span>)});<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>      
</span><span style='mso-spacerun:yes'> </span><span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>log</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>error</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE>err</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   
</span>},<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>local</span></span></span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'><span style='box-sizing: border-box'>err</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>      
</span><span style='mso-spacerun:yes'> </span><span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>log</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>error</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE>err</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   
</span>},<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-en><span
style='font-size:7.5pt;font-family:Consolas;color:#795DA3'><span
style='box-sizing: border-box'>fatal</span></span></span><span class=pl-k><span
style='font-size:7.5pt;font-family:Consolas;color:#A71D5D'><span
style='box-sizing: border-box'>:</span></span></span><span style='font-size:
7.5pt;font-family:Consolas;color:#333333'> </span><span class=SpellE><span
class=GramE><span class=pl-k><span style='font-size:7.5pt;font-family:Consolas;
color:#A71D5D'><span style='box-sizing: border-box'>function</span></span></span></span></span><span
class=GramE><span style='font-size:7.5pt;font-family:Consolas;color:#333333'>(</span></span><span
class=SpellE><span class=pl-smi><span style='font-size:7.5pt;font-family:Consolas;
color:#333333'><span style='box-sizing: border-box'>err</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'>){<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>      
</span><span style='mso-spacerun:yes'> </span><span class=SpellE><span
class=GramE><span class=pl-smi><span style='box-sizing: border-box'>log</span></span>.<span
class=pl-en><span style='color:#795DA3'><span style='box-sizing: border-box'>fatal</span></span></span></span></span><span
class=GramE>(</span><span class=SpellE>err</span>);<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>    </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'>};<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><span style='mso-tab-count:1'>            </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h1>Docker-compose</h1>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Le compose
possède cinq images.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l2 level1 lfo1;
tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
font-family:Arial;mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>1-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-size:10.0pt;font-family:Arial'>Le Frame <span class=SpellE>Receiver</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l2 level1 lfo1;
tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
font-family:Arial;mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>2-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-size:10.0pt;font-family:Arial'>Le Queue Manager (<span
class=SpellE>RabbitMQ</span>)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l2 level1 lfo1;
tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
font-family:Arial;mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>3-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-size:10.0pt;font-family:Arial'>La base de <span class=GramE>donnée</span>
<span class=SpellE>MongoDB</span> (n’est pas en cluster)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l2 level1 lfo1;
tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
font-family:Arial;mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>4-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-size:10.0pt;font-family:Arial'>Le service <span class=SpellE>Rest</span>
se connectant à la BD <span class=SpellE>MongoDB</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l2 level1 lfo1;
tab-stops:list 36.0pt'><![if !supportLists]><span style='font-size:10.0pt;
font-family:Arial;mso-fareast-font-family:Arial'><span style='mso-list:Ignore'>5-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-size:10.0pt;font-family:Arial'>La page web «&nbsp;Frame <span
class=SpellE>Viewer</span>&nbsp;»<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Frame <span
class=SpellE>Receiver</span>&nbsp;: Le programme principal, qui reçoit et
«&nbsp;<span class=SpellE>Parse</span>&nbsp;» les trames.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Queue
Manager&nbsp;: Une image de <span class=SpellE>RabbitMQ</span> simple qui reçoit
des instructions de la part du Frame <span class=SpellE>Receiver</span> afin de
créer un «&nbsp;<span class=SpellE>Work</span> Exchange&nbsp;». Le ce dernier
est composé de trois canaux&nbsp;: Acceptation, Développent et Production.
Chaque service peut accéder aux trames analysées en s’y connectant grâce au
Advanced Message <span class=SpellE>Queueing</span> Protocol (AMQP)
peut-importe le langage utilisé. Les trames seront fournies en JSON/GEOJSON.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Service <span
class=SpellE>Rest</span> Mongo&nbsp;: Un service pré-fabriquer qui fournit une
interface REST à n’importe quelle base de données <span class=SpellE>MongoDB</span>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Page
Web&nbsp;: Une page web élémentaire permettant de visionner les logs de trames
refusées ainsi que le log d’erreurs. On peut aussi visionner les dernières
trames qui ont étés analysées par le Frame <span class=SpellE>Receiver</span>
puisqu’il possède une interface REST très élémentaire. Avec un http <span
class=SpellE>get</span> sur url/frame, qui retourne un objet contenant les
vingt dernières trames.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span class=SpellE><span
class=GramE><span class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;
color:#63A35C'>framereceiver</span></span></span></span><span class=pl-ent><span
style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>image</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'> <span
style='box-sizing: border-box'>deasel011/frame:0.9.9</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>ports</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>3001:3001<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>3001:3001/<span
class=SpellE>udp<span style='box-sizing: border-box'></span></span></span><span
class=pl-pds><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>links</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'><span
class=SpellE>mongo:mongo</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'><span
class=SpellE>rabbitmq:rabbitmq</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>volumes</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'>/log/</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span class=GramE><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>mongo</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>image</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'> <span
style='box-sizing: border-box'>mongo</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>ports</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>27017:27017<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>volumes</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'>/data/<span
class=SpellE>db</span></span></span></span></span><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span class=SpellE><span
class=GramE><span class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;
color:#63A35C'>rabbitmq</span></span></span></span><span class=pl-ent><span
style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>image</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'> <span
style='box-sizing: border-box'><span class=SpellE>rabbitmq</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>ports</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>4369:4369<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>5671:5671<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>5672:5672<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>25672:25672<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span class=SpellE><span
class=GramE><span class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;
color:#63A35C'>mongorest</span></span></span></span><span class=pl-ent><span
style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>image</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'> <span
style='box-sizing: border-box'>deasel011/<span class=SpellE>mongorest</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>ports</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>8008:8008<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>links</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'><span
class=SpellE>mongo:mongo</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span class=SpellE><span
class=GramE><span class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;
color:#63A35C'>frameviewer</span></span></span></span><span class=pl-ent><span
style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>image</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'> <span
style='box-sizing: border-box'>deasel011/<span class=SpellE>frameviewer</span>:0.0.1</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>ports</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'></span></span><span
class=pl-pds><span style='box-sizing: border-box'><span style='font-size:7.5pt;
font-family:Consolas;color:#183691'>&quot;</span></span></span><span
class=pl-s><span style='font-size:7.5pt;font-family:Consolas;color:#183691'>3000:3000<span
style='box-sizing: border-box'></span></span><span class=pl-pds><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'>&quot;</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'> </span></span><span class=GramE><span
style='box-sizing: border-box'><span class=pl-ent><span style='font-size:7.5pt;
font-family:Consolas;color:#63A35C'><span style='box-sizing: border-box'>links</span></span></span><span
class=pl-ent><span style='font-size:7.5pt;font-family:Consolas;color:#63A35C'>:</span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:11.4pt'><span style='font-size:7.5pt;
font-family:Consolas;color:#333333'><span style='mso-spacerun:yes'>   </span><span
style='mso-spacerun:yes'> </span></span><span class=pl-s><span
style='font-size:7.5pt;font-family:Consolas;color:#183691'><span
style='box-sizing: border-box'>- <span style='box-sizing: border-box'><span
class=SpellE>mongorest:mongorest</span></span></span></span></span><span
style='font-size:7.5pt;font-family:Consolas;color:#333333'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h2><span class=SpellE>MongoDB</span></h2>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>La base de
données mongo est exécutée en cluster grâce au module Rancher. Après avoir démarré
la base de données, il est possible créer manuellement un index sur le champ de
Date des trames afin de pouvoir les triées efficacement.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid #EEEEEE 1.0pt;mso-border-alt:
solid #EEEEEE .5pt;padding:13.0pt 13.0pt 13.0pt 13.0pt;background:white'><pre><span
class=GramE>mongo</span> 192.169.99.100</pre><pre>&gt;use frame</pre><pre>&gt;<span
class=SpellE><span class=GramE>db.frame.createIndex</span></span><span
class=GramE>(</span>{<span class=SpellE>updateTime</span>: 1})</pre><pre>&gt;exit</pre></div>

<p class=MsoNormal><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>

<h2>Gestion d’erreur&nbsp;:</h2>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Les erreurs de connexions rendent le programme obsolète. Si
la connexion à la base de données est interrompue, nous terminons l’exécution.
Si la connexion au Queue Manager est interrompue, nous terminons aussi
l’exécution. Le QM et la BD sont essentielles dans l’état du programme actuel.
Tant qu’un des deux n’est pas disponible, le programme ne doit pas s’exécuter.
Pour palier à ce problème potentiel, nous exécutons <span class=SpellE>mongoDB</span>
en cluster afin d’assurer une stabilité de service. Actuellement, <span
class=SpellE>RabbitMQ</span> est lancé avec la même machine que <span
class=SpellE>FrameReceiver</span>, si l’un des deux n’est pas actif, l’autre ne
l’est pas.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:10.0pt;
font-family:Arial'>Le docker-compose.yml sur <a
href="https://github.com/Deasel011/ConsolidatedFR">https://github.com/Deasel011/ConsolidatedFR</a>
offre un container de mongo directement lié avec tout le reste.<o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:solid #EEEEEE 1.0pt;mso-border-alt:
solid #EEEEEE .5pt;padding:13.0pt 13.0pt 13.0pt 13.0pt;background:white'><pre><span
class=SpellE><span class=GramE>process.on</span></span><span class=GramE>(</span>'<span
class=SpellE>uncaughtException</span>', <span class=SpellE>function</span>(<span
class=SpellE>err</span>){</pre><pre><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>log.fatal</span></span><span class=GramE>(</span><span
class=SpellE>err</span>);</pre><pre><span style='mso-spacerun:yes'>    </span><span
class=SpellE><span class=GramE>console.error</span></span><span class=GramE>(</span><span
class=SpellE>err</span>);</pre><pre><span style='mso-spacerun:yes'>    </span><span
class=SpellE>process.exit</span>(1);</pre><pre>});</pre></div>

<p class=MsoNormal><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>

<h1>Configuration de <span class=SpellE>frameReceiver</span></h1>

<div style='mso-element:para-border-div;border:solid #EEEEEE 1.0pt;mso-border-alt:
solid #EEEEEE .5pt;padding:13.0pt 13.0pt 13.0pt 13.0pt;background:white'><pre><span
class=SpellE>module.exports</span> = {</pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=GramE>host</span>': '127.0.0.1',</pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=GramE>port</span>': '8000',</pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=SpellE><span class=GramE>dbtype</span></span>': 'mongo',</pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=SpellE><span class=GramE>dburl</span></span>': 'mongodb://<span
style='color:red'>mongo</span>:27017/frame', </pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=SpellE><span class=GramE>portudp</span></span>': '3001',</pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=SpellE><span class=GramE>exchangeurl</span></span>':'amqp://<span
style='color:#FF6600'>rabbitmq</span>',<span style='mso-spacerun:yes'>                                            </span></pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=GramE>exchange</span>': 'frame',</pre><pre><span style='mso-spacerun:yes'>    </span>'<span
class=SpellE><span class=GramE>errPath</span></span>': '/log/'</pre><pre><span style='mso-spacerun:yes'>                   </span></pre><pre>}</pre></div>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Host&nbsp;:
Adresse de la machine hôte.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Port&nbsp;:
Numéro de port pour l’API <span class=SpellE>Rest</span> de Frame <span
class=SpellE>Receiver</span><o:p></o:p></span></p>

<p class=MsoNormal><span class=SpellE><span style='font-size:10.0pt;font-family:
Arial'>Dbtype</span></span><span style='font-size:10.0pt;font-family:Arial'>&nbsp;:
non utilisé pour l’instant car il n’y a qu’une seule base de donnée supportée
soit <span class=SpellE>Mongodb</span>.<o:p></o:p></span></p>

<p class=MsoNormal><span class=SpellE><span style='font-size:10.0pt;font-family:
Arial'>Dburl</span></span><span style='font-size:10.0pt;font-family:Arial'>&nbsp;:
L’<span class=SpellE>addresse</span> <span class=SpellE>ip</span> de la base de
donnée mongo (Si il y a une authentification à passée, on peut la passer à
travers l’url puisque nous utilisons une connexion <span class=SpellE>mongoose</span>)<o:p></o:p></span></p>

<p class=MsoNormal><span class=SpellE><span style='font-size:10.0pt;font-family:
Arial'>Portudp</span></span><span style='font-size:10.0pt;font-family:Arial'>&nbsp;:
le numéro de port utilisé pour recevoir des trames UDP<o:p></o:p></span></p>

<p class=MsoNormal><span class=SpellE><span style='font-size:10.0pt;font-family:
Arial'>Exchangeurl</span></span><span style='font-size:10.0pt;font-family:Arial'>&nbsp;:
L’adresse du Queue Manager.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Exchange&nbsp;:
Le nom du «&nbsp;<span class=SpellE>meta</span>-canal&nbsp;» de <span
class=SpellE>rabbitmq</span> désignant un «&nbsp;exchange&nbsp;», c’est-à-dire
un point de diffusion vers plusieurs canaux.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Trois
champs sont très susceptibles de changer&nbsp;: <span class=SpellE>dburl</span>,
<span class=SpellE>exchangeurl</span> et <span class=SpellE>errPath</span>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Si la base
de donnée n’est pas gérée à l’intérieur de la même machine virtuelle Docker, il
va falloir entrer son adresse manuellement à la place de <span
style='color:red'>mongo</span>. Si le Queue Manager n’est lui aussi pas dans le
même <span class=SpellE>vm</span> Docker, il va aussi falloir entrer son
adresse à la place de <span class=SpellE><span style='color:#FF6600'>rabbitmq</span></span>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<h1>Test</h1>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Pour rouler
les tests,<o:p></o:p></span></p>

<h1><span style='font-size:10.0pt'>Frame <span class=SpellE>Viewer</span><o:p></o:p></span></h1>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Le site
Frame <span class=SpellE>Viewer</span> utilise Angular2 et est écrit en <span
class=SpellE>Typescript</span>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>But&nbsp;:
afficher les dernières trames reçues<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Solution&nbsp;:
Aller chercher l’information sur les trames grâce <span class=GramE>a</span> un
service REST fourni par Frame <span class=SpellE>Receiver</span> sur le port
8000.<o:p></o:p></span></p>

</div>

</body>

</html>
